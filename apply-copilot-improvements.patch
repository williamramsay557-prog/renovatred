From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: copilot <copilot@example.com>
Date: Wed, 29 Oct 2025 21:14:44 +0000
Subject: [PATCH] chore: add CI, ESLint, Prettier and proposed strict tsconfig; add scripts

---
 .github/workflows/ci.yml            |  40 ++++++++++++++++++++++++++++++++++++++
 .eslintrc.cjs                       |  36 ++++++++++++++++++++++++++++++++++
 .prettierrc                         |   6 ++++++
 package.json                        |  34 ++++++++++++++++++++++++------
 tsconfig.strict.json                |  20 ++++++++++++++
 vite.config.ts                      |   4 ++--
 6 files changed, 126 insertions(+), 14 deletions(-)
 create mode 100644 .github/workflows/ci.yml
 create mode 100644 .eslintrc.cjs
 create mode 100644 .prettierrc
 create mode 100644 tsconfig.strict.json
diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
new file mode 100644
index 0000000..1111111
--- /dev/null
+++ b/.github/workflows/ci.yml
@@ -0,0 +1,40 @@
+name: CI
+
+on:
+  push:
+    branches: [ main, 'copilot-improvements' ]
+  pull_request:
+    branches: [ main ]
+
+jobs:
+  build-and-test:
+    runs-on: ubuntu-latest
+    strategy:
+      matrix:
+        node-version: [18.x, 20.x]
+    steps:
+      - uses: actions/checkout@v4
+      - name: Use Node.js ${{ matrix.node-version }}
+        uses: actions/setup-node@v4
+        with:
+          node-version: ${{ matrix.node-version }}
+          cache: 'npm'
+      - name: Install dependencies
+        run: npm ci
+      - name: Lint
+        run: npm run lint --if-present
+      - name: Type check
+        run: npm run typecheck --if-present
+      - name: Build
+        run: npm run build --if-present
+      - name: Run tests
+        run: npm test --if-present
+
diff --git a/.eslintrc.cjs b/.eslintrc.cjs
new file mode 100644
index 0000000..2222222
--- /dev/null
+++ b/.eslintrc.cjs
@@ -0,0 +1,36 @@
+module.exports = {
+  root: true,
+  env: {
+    browser: true,
+    node: true,
+    es2022: true,
+  },
+  parser: '@typescript-eslint/parser',
+  parserOptions: {
+    ecmaVersion: 'latest',
+    sourceType: 'module',
+    ecmaFeatures: { jsx: true },
+  },
+  plugins: ['@typescript-eslint', 'react'],
+  extends: [
+    'eslint:recommended',
+    'plugin:@typescript-eslint/recommended',
+    'plugin:react/recommended',
+    'prettier',
+  ],
+  settings: {
+    react: { version: 'detect' },
+  },
+  rules: {
+    // Conservative starter rules to avoid large automated churn
+    'no-console': 'warn',
+    'react/react-in-jsx-scope': 'off',
+    '@typescript-eslint/no-explicit-any': 'off',
+    '@typescript-eslint/explicit-function-return-type': 'off',
+  },
+};
diff --git a/.prettierrc b/.prettierrc
new file mode 100644
index 0000000..3333333
--- /dev/null
+++ b/.prettierrc
@@ -0,0 +1,6 @@
+{
+  "printWidth": 100,
+  "singleQuote": true,
+  "trailingComma": "all",
+  "arrowParens": "always",
+  "endOfLine": "lf"
+}
diff --git a/package.json b/package.json
index c220261..4444444 100644
--- a/package.json
+++ b/package.json
@@ -1,26 +1,48 @@
 {
   "name": "renovatr-app",
   "private": true,
   "version": "0.0.0",
   "type": "module",
-  "scripts": {
-    "dev": "vite",
-    "build": "vite build",
-    "preview": "vite preview"
-  },
-  "dependencies": {
-    "@google/genai": "^0.14.0",
-    "@supabase/supabase-js": "^2.45.0",
-    "react": "^18.2.0",
-    "react-dom": "^18.2.0",
-    "uuid": "^9.0.1"
-  },
-  "devDependencies": {
-    "@types/react": "^18.2.66",
-    "@types/react-dom": "^18.2.22",
-    "@types/uuid": "^9.0.8",
-    "@vitejs/plugin-react": "^4.2.1",
-    "typescript": "^5.2.2",
-    "vite": "^5.2.0"
-  }
+  "scripts": {
+    "dev": "vite",
+    "build": "vite build",
+    "preview": "vite preview",
+    "lint": "eslint 'src/**/*.{ts,tsx,js,jsx}' --fix",
+    "format": "prettier --write .",
+    "typecheck": "tsc -p tsconfig.json --noEmit",
+    "test": "vitest"
+  },
+  "dependencies": {
+    "@google/genai": "^0.14.0",
+    "@supabase/supabase-js": "^2.45.0",
+    "react": "^18.2.0",
+    "react-dom": "^18.2.0",
+    "uuid": "^9.0.1"
+  },
+  "devDependencies": {
+    "@types/react": "^18.2.66",
+    "@types/react-dom": "^18.2.22",
+    "@types/uuid": "^9.0.8",
+    "@vitejs/plugin-react": "^4.2.1",
+    "typescript": "^5.2.2",
+    "vite": "^5.2.0",
+    "eslint": "^8.0.0",
+    "prettier": "^2.8.0",
+    "eslint-config-prettier": "^8.0.0",
+    "@typescript-eslint/parser": "^6.0.0",
+    "@typescript-eslint/eslint-plugin": "^6.0.0",
+    "vitest": "^1.0.0",
+    "eslint-plugin-react": "^7.0.0"
+  }
 }
 
diff --git a/tsconfig.strict.json b/tsconfig.strict.json
new file mode 100644
index 0000000..5555555
--- /dev/null
+++ b/tsconfig.strict.json
@@ -0,0 +1,20 @@
+{
+  "extends": "./tsconfig.json",
+  "compilerOptions": {
+    "strict": true,
+    "noImplicitAny": true,
+    "strictNullChecks": true,
+    "strictFunctionTypes": true,
+    "strictBindCallApply": true,
+    "noImplicitThis": true,
+    "alwaysStrict": true,
+    "noUnusedLocals": true,
+    "noUnusedParameters": false,
+    "noFallthroughCasesInSwitch": true,
+    "forceConsistentCasingInFileNames": true
+  }
+}
diff --git a/vite.config.ts b/vite.config.ts
index 3fcdad1..6666666 100644
--- a/vite.config.ts
+++ b/vite.config.ts
@@ -1,17 +1,17 @@
 import { defineConfig } from 'vite';
 import react from '@vitejs/plugin-react';
 
 // https://vitejs.dev/config/
 export default defineConfig({
   plugins: [react()],
   build: {
     outDir: 'dist',
-    sourcemap: true,
+    // disable source maps in production to avoid exposing source code
+    sourcemap: process.env.NODE_ENV !== 'production',
   },
   resolve: {
     alias: {
       '@': '/src',
     },
   },
 });
 
-- 
2.42.0
